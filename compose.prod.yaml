# =====EXAMPLE======

# services:
# postgres:
#   image: postgres:17
#   container_name: postgres
#   environment:
#     POSTGRES_USER: ${POSTGRES_USER}
#     POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
#     POSTGRES_DB: ${POSTGRES_DB}
#   volumes:
#     - postgres_data:/var/lib/postgresql/data
#   networks:
#     - app_network
#   restart: always
#   healthcheck:
#     test: ["CMD-SHELL", "pg_isready -U ${POSTGRES_USER} -d ${POSTGRES_DB}"]
#     interval: 5s
#     timeout: 5s
#     retries: 5

# backend:
#   build:
#     context: ./backend
#     target: production
#   container_name: backend
#   command: sh -c "npx prisma migrate deploy && npm run start:prod"
#   environment:
#     DATABASE_URL: "postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}?schema=public"
#     NODE_ENV: production
#   depends_on:
#     postgres:
#       condition: service_healthy
#   networks:
#     - app_network
#   restart: always

# frontend:
#   build:
#     context: ./frontend
#     target: production
#   container_name: frontend
#   environment:
#     VITE_API_URL: "/api"
#   networks:
#     - app_network
#   restart: always

# nginx:
#   image: nginx:alpine
#   container_name: nginx
#   ports:
#     - "80:80"
#     - "443:443"
#   volumes:
#     - ./nginx/nginx-prod.conf:/etc/nginx/conf.d/default.conf
#     - ./certs:/etc/nginx/certs
#   depends_on:
#     - frontend
#     - backend
#   networks:
#     - app_network
#   restart: always

# volumes:
# postgres_data:

# networks:
# app_network:
